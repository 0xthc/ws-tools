# Auto-toggle layout when window is resized (moved between displays)
set-hook -g client-resized 'run-shell -b "~/.ws/layout-toggle 2>/dev/null"'

# ws CLI - Worktree selector popup (prefix + W)
bind-key W display-popup -E -w 60% -h 60% "ws select"

# ws CLI - AI tool switcher popup (prefix + A)
bind-key A display-popup -E -w 50% -h 50% "ws ai"

# ws CLI - Reload current workspace session (prefix + R)
bind-key R run-shell "ws reload"

# ws CLI - Delete current worktree, branch, and session (prefix + D)
bind-key D confirm-before -p "Delete worktree and session '#S'? (y/n)" "run-shell 'ws delete \"#{pane_current_path}\" --force'"

# Fuzzy file finder popup (prefix + F) - opens in nvim
bind-key F display-popup -E -w 80% -h 80% "fzf --preview 'bat --color=always --style=numbers --line-range=:500 {}' | xargs -r nvim -c 'nnoremap <Esc><Esc> :q!<CR>'"

# Layout toggle - Expand to 3 columns (prefix + 3)
bind-key 3 run-shell "~/.ws/layout-toggle --expand"

# Layout toggle - Shrink to 2 columns (prefix + 2)
bind-key 2 run-shell "~/.ws/layout-toggle --shrink"
